# Frontend AI Guide - Badminton App

This guide provides instructions for AI assistants working on the frontend Vue 3 application.

## Windows PowerShell Command Syntax

**IMPORTANT**: This project runs on Windows PowerShell, not bash. Use these syntax rules:

- **Command chaining**: Use `;` (semicolon) instead of `&&` (ampersand-ampersand)
  - ❌ Wrong: `cd frontend && npm install && npm run build`
  - ✅ Correct: `cd frontend; npm install; npm run build`

- **Piping**: Use `|` as normal, but be aware of PowerShell-specific tools
  - ❌ Wrong: Use `tail -20` or `head -10` (these are Unix commands)
  - ✅ Correct: Use PowerShell equivalents like `Select-Object -Last 20`

## Frontend Project Structure

```
frontend/
├── src/
│   ├── App.vue              # Root Vue component
│   ├── main.js              # Entry point
│   ├── assets/              # Static assets
│   ├── components/          # Vue components
│   ├── router/              # Vue Router configuration
│   └── views/               # Page views
├── public/
│   ├── index.html           # HTML template
│   └── favicon.ico          # Favicon
├── node/                    # Local Node.js binaries
├── package.json             # Dependencies (CRITICAL: Keep versions aligned)
├── vue.config.js            # Vue CLI configuration
├── jsconfig.json            # JavaScript configuration
├── babel.config.js          # Babel configuration
├── pom.xml                  # Maven configuration (for integration)
└── target/                  # Build output directory
```

## Setup and Installation

### First Time Setup
```powershell
cd E:\learn\badminton-app\frontend
npm install
```

This installs all dependencies listed in `package.json`. The project uses:
- **Vue 3** - Frontend framework
- **Vue Router 4** - Routing
- **Core.js** - JavaScript polyfills
- **ESLint** - Code linting
- **Babel** - JavaScript transpiler

## Running Commands

### Development Server
```powershell
cd E:\learn\badminton-app\frontend
npm run serve
```
- Starts a development server with hot reload
- Default: http://localhost:8080
- Connected to backend at http://localhost:8098 (see vue.config.js)

### Build for Production
```powershell
cd E:\learn\badminton-app\frontend
npm run build
```
- Creates optimized production build
- Output directory: `target/dist`
- This is the build that gets deployed

### Run Linter
```powershell
cd E:\learn\badminton-app\frontend
npm run lint
```
- Checks code for style and syntax issues
- Uses ESLint configuration in `.eslintrc` or `vue.config.js`

## Critical Files

### package.json
Contains all npm dependencies and scripts. **Keep versions aligned** to avoid build errors like "transpileDependencies.map is not a function".

Key versions to watch:
- `@vue/cli-service` and `@vue/cli-plugin-*` should be same major version (~5.0.0)
- `eslint` version should match `@vue/eslint-config-*` requirements
- All must be compatible with `vue` version

### vue.config.js
Vue CLI configuration. Important settings:
- `transpileDependencies`: Array of dependency patterns to transpile (must be array, not boolean)
- `devServer.proxy`: Proxy configuration for API calls (currently points to `http://localhost:8098`)
- `outputDir`: Where build output goes (`target/dist`)
- `assetsDir`: Asset subdirectory (`static`)

### .eslintrc or eslint configuration
Linting rules. Look in `vue.config.js` if `.eslintrc` doesn't exist.

## Common Issues and Solutions

### Issue: "transpileDependencies.map is not a function"
**Cause**: `transpileDependencies` is set to `true` instead of an array
**Solution**: In `vue.config.js`, change:
```javascript
transpileDependencies: true,  // ❌ Wrong
```
to:
```javascript
transpileDependencies: [],    // ✅ Correct
```

### Issue: Build fails with module version mismatch
**Cause**: Mismatched Vue CLI plugin versions
**Solution**: 
1. Delete `node_modules` folder
2. Delete `package-lock.json` file
3. Run `npm install` to reinstall with correct versions
4. Check that all `@vue/cli-plugin-*` packages match `@vue/cli-service` major version

### Issue: Linter errors prevent build
**Options**:
1. Fix the linting errors (preferred)
2. Add ESLint ignore comments: `// eslint-disable-next-line`
3. Modify ESLint rules in configuration

## API Backend Integration

The frontend connects to the Spring Boot backend:
- **Backend Base URL**: `http://localhost:8098`
- **API Proxy**: Configured in `vue.config.js` under `devServer.proxy`
- **When using npm run serve**: API calls to `/api/*` are proxied to backend
- **When using production build**: Update backend URL if deployed elsewhere

## Build Output

After `npm run build`, check:
- `target/dist/` - Contains production build
  - `static/js/` - JavaScript bundles
  - `static/css/` - CSS bundles
  - `index.html` - Main HTML file
  - Images and assets

The build includes source maps for debugging in development mode.

## Dependencies Management

When updating dependencies:
1. Test build locally: `npm run build`
2. Test development server: `npm run serve`
3. Run linter: `npm run lint`
4. Only commit if all tests pass

Use CVE Remediator agent when:
- Security vulnerabilities are discovered
- Major version updates are needed
- Dependency conflicts prevent build

## Troubleshooting Commands

```powershell
# Clear npm cache
npm cache clean --force

# Verify installed versions
npm list

# Check for vulnerabilities
npm audit

# Update specific package
npm update [package-name]

# Install specific version
npm install [package-name]@[version]
```

## Deployment

The built files in `target/dist/` are served by the Spring Boot backend:
1. Build frontend: `npm run build`
2. Backend serves `target/dist/` as static content
3. Browser loads `index.html` from backend
4. Vue Router handles client-side routing
5. API calls go to `/api` endpoints on same backend

## Getting Help

When asking for help:
1. Always provide the error message
2. Run `npm run build` to reproduce if possible
3. Share relevant parts of `package.json` and `vue.config.js`
4. Mention Node.js and npm versions: `node --version; npm --version`
5. Reference the root `.ai-guide.md` for general project structure

## UI Framework: Bootstrap (Required)

This frontend uses **Bootstrap 5** for layout and components. Keep it enabled and prefer Bootstrap classes for layout and common UI elements.

**Required imports (already wired):**
- `frontend/src/main.js` must import Bootstrap CSS and JS bundle:
  - `import 'bootstrap/dist/css/bootstrap.min.css'`
  - `import 'bootstrap/dist/js/bootstrap.bundle.min.js'`

**Usage guidelines:**
- Use Bootstrap classes (`container`, `row`, `col-*`, `btn`, `card`, `navbar`, etc.) for consistent UI.
- Keep custom CSS minimal; only add overrides when Bootstrap does not cover a need.
- Do not remove Bootstrap imports unless replacing it with an approved alternative.
